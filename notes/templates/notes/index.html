{% extends 'notes/base.html' %}
{% load static %}

{% block content %}
<div class="notes-layout">
    {# –ë—ñ—á–Ω–∞ –ø–∞–Ω–µ–ª—å –∑ –ø–∞–ø–∫–∞–º–∏ #}
    <aside class="sidebar">
        <h3>Folders</h3>
        <ul class="folder-list">
            {# –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –Ω–æ—Ç–∞—Ç–∫–∏ –±–µ–∑ –ø–∞–ø–∫–∏ #}
            <li class="{% if not selected_folder_id %}active{% endif %}">
                <a href="{% url 'notes:index' %}">Uncategorized</a>
            </li>
            {# –¶–∏–∫–ª –ø–æ –ø–∞–ø–∫–∞—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ #}
            {% for f in folders %}
            <li class="{% if selected_folder_id == f.id %}active{% endif %}">
                <a href="{% url 'notes:index' %}?folder={{ f.id }}">{{ f.name }}</a>
                {# –î–æ–¥–∞—Ç–∏ –∫–Ω–æ–ø–∫–∏ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø–∞–ø–∫–∏ –ø—ñ–∑–Ω—ñ—à–µ #}
            </li>
            {% empty %}
            <li><small>No folders yet.</small></li>
            {% endfor %}
        </ul>
        
        {# –§–æ—Ä–º–∞ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø–∞–ø–∫–∏ (–ø–æ—á–∞—Ç–∫–æ–≤–æ –ø—Ä–∏—Ö–æ–≤–∞–Ω–∞) #}
        <form id="add-folder-form" style="display: none; margin-top: 15px;">
             <input type="text" id="new-folder-name" placeholder="New folder name..." class="sidebar-input" required>
             <button type="submit" class="btn-save-folder">Save</button>
             <button type="button" id="cancel-add-folder" class="btn-cancel-folder">Cancel</button> {# –ö–Ω–æ–ø–∫–∞ —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è #}
        </form>

        {# –ö–Ω–æ–ø–∫–∞, —è–∫–∞ –ø–æ–∫–∞–∑—É—î —Ñ–æ—Ä–º—É #}
        <button type="button" id="show-add-folder-btn" class="btn-add-folder">New Folder</button> {# –ó–º—ñ–Ω—é—î–º–æ <a> –Ω–∞ <button> #}
    </aside>

    {# –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç (—Ñ–æ—Ä–º–∞ —Ç–∞ —Å–ø–∏—Å–æ–∫ –Ω–æ—Ç–∞—Ç–æ–∫) #}
    <main class="main-content">
        <div class="container">
            <h1 class="title page-title">
                {% if selected_folder %}
                    {{ selected_folder.name }}
                {% else %}
                    My Notes
                {% endif %}
            </h1>

            {# –†–æ–∑–¥—ñ–ª—å–Ω–∏–∫ #}
            <hr class="section-divider">

            <form id="add-note-form" class="note-form" method="post">
                {% csrf_token %}
                {% if selected_folder_id %}
                <input type="hidden" name="folder" value="{{ selected_folder_id }}">
                {% endif %}
                
                {# –û–±–≥–æ—Ä—Ç–∫–∞ –¥–ª—è –ø–æ–ª—è Title –∑ —ñ–∫–æ–Ω–∫–æ—é #}
                <div class="input-with-icon">
                    <span class="input-icon">üìù</span>
                    <input type="text" name="title" placeholder="Title" class="note-input" required>
                </div>

                {# –û–±–≥–æ—Ä—Ç–∫–∞ –¥–ª—è Textarea (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ) #}
                <div class="textarea-wrapper">
                    <textarea name="content" placeholder="The text of the note..." class="note-textarea" required></textarea>
                </div>

                <button type="submit" class="note-button btn-gradient">
                    <span class="button-icon">‚ûï</span> Create a note
                </button>
            </form>

            <hr class="section-divider notes-divider">

            <div id="notes-list" class="notes-grid">
                {% for note in notes %}
                    {% include 'notes/partials/note_card.html' %}
                {% empty %}
                    <p class="empty-notes-text">There are no notes in this folder.</p>
                {% endfor %}
            </div>

            {# –ö–Ω–æ–ø–∫–∞ –∫–æ—Ä–∑–∏–Ω–∏ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –ø–æ–∑–∏—Ü—ñ–æ–Ω–æ–≤–∞–Ω–æ—é –≤—ñ–¥–Ω–æ—Å–Ω–æ viewport #}
            <div style="text-align: right; margin: 20px;">
              <a href="{% url 'notes:trash' %}" class="btn-trash-icon">üóëÔ∏è</a>
            </div>
        </div>
    </main>
</div>
{% endblock %}

{# –°–∫—Ä–∏–ø—Ç–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –≤ –∫—ñ–Ω—Ü—ñ #}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{% static 'notes/scripts.js' %}"></script>


